function checkHeight(e){var e=$(e),t=0,i=e.parent(),s=i.outerHeight(),a=e.outerHeight(),n=s-a;e.outerHeight()>s?(i.addClass("scroll"),i.on("mousewheel",function(i){i.originalEvent.deltaY>0?(t-=30,t<n&&(t=n)):i.originalEvent.deltaY<0&&(t+=30,t>0&&(t=0)),e.css({top:t})})):(i.removeClass("scroll"),e.css({top:0}),i.off("mousedown mousemove mousewheel"))}function sendEmail(e){}var items=!1,animating=!1,emailChecked,currentStep=0,selected={categories:{Appliances:{items:[],itemCount:[],isActive:!1,sub_categories:["Kitchen","Laundry","Other"],total:0},Beds:{items:[],itemCount:[],isActive:!1,sub_categories:["Mattress Only","Mattress & Box Spring","Bed Frames","Futons","Nursery","Other"],total:0},Cabinets:{items:[],itemCount:[],isActive:!1,sub_categories:["Dining","Office","Bedroom","Entertainment"],total:0},"Sofas & Couches":{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},"Tables & Desks":{items:[],itemCount:[],isActive:!1,sub_categories:["Dining","Coffee & End Tables","Desks","Patio","Other"],total:0},Chairs:{items:[],itemCount:[],isActive:!1,sub_categories:["Living Room","Dining","Office","Patio"],total:0},Bookcases:{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},Boxes:{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},Electronics:{items:[],itemCount:[],isActive:!1,sub_categories:["Stereos","TVs","TV Stands"],total:0},Lamps:{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},Mirrors:{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},"Children's Items":{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},Hobbies:{items:[],itemCount:[],isActive:!1,sub_categories:["Sporting Equipment","Musical Instruments & Equipment"],total:0},Tools:{items:[],itemCount:[],isActive:!1,sub_categories:[],total:0},"Odds & Ends":{items:[],itemCount:[],isActive:!1,sub_categories:["Decor","Kitchen","Patio","Nursery/Kid's Room","Safes","Garage","Other"],total:0}},activeCats:[],total:0,totalWeight:0,totalVol:0,updateTotals:function(e,t,i){selected.total+=e,selected.totalWeight+=t,selected.totalVol+=i,$("#total-items").html(selected.total),$("#item-weight").find("span").html(selected.totalWeight+" lbs"),$("#item-vol").find("span").html(selected.totalVol+" CF"),$("#item-count").html(selected.total+" <sup>ITM</sup>"),$("#total-vol").html(selected.totalVol+" <sup>CF</sup>"),$("#total-weight").html(selected.totalWeight+" <sup>LBS</sup>")},addItem:function(e,t,i,s,a){var n=selected.categories[t].items.indexOf(e);if("undefined"==typeof a&&(a=e),n===-1?(n=selected.categories[t].items.length,"Boxes"==t&&($("#box-holder").find("ul").append('<li><div class="cat" id="added-'+items[e].item_name.split(" ").join("_")+'">'+items[e].item_name+'</div><div class="number" style="display:block;">1</div></li>').find("li:last").addClass("animate-in"),checkHeight("#box-holder"),setTimeout(function(){$("li").removeClass("animate-in"),animating=!1},500)),selected.categories[t].items.push(parseInt(e)),selected.categories[t].itemCount.push(1),selected.categories[t].total++):(selected.categories[t].itemCount[n]++,selected.categories[t].total++,"Boxes"==t&&$(document.getElementById("added-"+items[e].item_name)).siblings(".number").html(selected.categories[t].itemCount[n])),selected.updateTotals(1,i,s),$(document.getElementById("added-"+t.split(" ").join("_"))).siblings(".number").html(selected.categories[t].total),items[e].hasChildren.length>0){if(""!=$("#item-"+e).find(".img").find(".number").html())var d=parseInt($("#item-"+e).find(".img").find(".number").html());else var d=0;d++,$("#item-"+e).find(".img").find(".number").html(d),$("#item-"+e).find(".menu").find("li").eq(0).find(".number").html(selected.categories[t].itemCount[n]),$("#item-"+e).find(".menu").find("li").eq(0).find(".multi-minus").show()}else if(items[e].isChild===!0){if(""!=$("#item-"+a).find(".img").find(".number").html())var d=parseInt($("#item-"+a).find(".img").find(".number").html());else var d=0;d++,$("#item-"+a).find(".img").find(".number").html(d),$("#item-"+e).find(".number").html(selected.categories[t].itemCount[n]),$("#item-"+e).find(".multi-minus").show()}else $("#item-"+e).find(".number").addClass("flash").html(selected.categories[t].itemCount[n]);setTimeout(function(){$("#item-"+e).find(".number").removeClass("flash")},500)},removeItem:function(e,t,i,s,a){var n=selected.categories[t].items.indexOf(e);if(selected.categories[t].itemCount[n]--,selected.categories[t].total--,selected.updateTotals(-1,-i,-s),"undefined"==typeof a&&(a=e),items[e].hasChildren.length>0){var d=parseInt($("#item-"+e).find(".img").find(".number").html());d--,0==selected.categories[t].itemCount[n]?(selected.categories[t].itemCount.splice(n,1),selected.categories[t].items.splice(n,1),$("#item-"+e).find(".menu").find("li").eq(0).find(".number").html(""),$("#item-"+e).find(".menu").find("li").eq(0).find(".multi-minus").hide(),0==d?$("#item-"+e).removeClass("owned").find(".img").find(".number").html(""):$("#item-"+e).find(".img").find(".number").html(d)):($("#item-"+e).find(".img").find(".number").html(d),$("#item-"+e).find(".menu").find("li").eq(0).find(".number").html(selected.categories[t].itemCount[n]))}else if(items[e].isChild===!0){var d=parseInt($("#item-"+a).find(".img").find(".number").html());d--,0==selected.categories[t].itemCount[n]?(selected.categories[t].itemCount.splice(n,1),selected.categories[t].items.splice(n,1),$("#item-"+e).find(".number").html(""),$("#item-"+e).find(".multi-minus").hide(),0==d?$("#item-"+a).find(".img").find(".number").html(""):$("#item-"+a).find(".img").find(".number").html(d)):($("#item-"+a).find(".img").find(".number").html(d),$("#item-"+e).find(".number").html(selected.categories[t].itemCount[n]))}else 0==selected.categories[t].itemCount[n]?(selected.categories[t].itemCount.splice(n,1),selected.categories[t].items.splice(n,1),"Boxes"==t&&$(document.getElementById("added-"+items[e].item_name)).parent().remove(),$("#item-"+e).removeClass("owned").find(".number").html(""),$("#item-"+e).find(".controls").stop(!0).animate({top:"100%"},200)):($("#item-"+e).find(".number").addClass("flash").html(selected.categories[t].itemCount[n]),"Boxes"==t&&$(document.getElementById("added-"+items[e].item_name)).siblings(".number").html(selected.categories[t].itemCount[n]));$("#added-"+t).siblings(".number").html(selected.categories[t].total),setTimeout(function(){$("#item-"+e).find(".number").removeClass("flash")},800)},addCat:function(e){selected.activeCats.unshift(e),selected.categories[e].isActive=!0,$("#ul-holder").find("ul").prepend('<li><div class="cat" id="added-'+e.split(" ").join("_")+'">'+e+'</div><div class="close-btn">+</div><div class="number">0</div></li>').find("li:first").addClass("animate-in"),checkHeight("#ul-holder"),setTimeout(function(){$("li").removeClass("animate-in"),animating=!1,checkHeight("#cat-holder")},500)},loadCats:function(e){$("#cat-holder").html("");var e=[];$.each(selected.categories,function(t){"Boxes"!==t&&e.push(t)});for(var t=0;t<e.length;t++){var i=0-133*(t%4),s=0-133*Math.floor(t/4);$("#cat-holder").append('<div class="item"><div class="img" id="'+e[t].split(" ").join("_")+'" style="background-position: '+i+"px "+s+'px"></div><div class="bottom"><h4 class="cancelSelect">'+e[t]+"</h4></div></div>")}checkHeight($("#cat-holder"))},loadBoxes:function(){var e="Boxes",t=[];$.each(items,function(e,i){"Boxes"==i.category&&t.push(i)});for(var i=0;i<t.length;i++){var s="img/items/"+t[i].item_name.split(" ").join("_").toLowerCase()+".png";if(t[i].isChild!==!0){var a=selected.categories[e].items.indexOf(t[i].item_id),n=selected.categories[e].items.indexOf(t[i].item_id)!==-1?" owned":"",d='<div class="item'+n+(t[i].hasChildren.length>0?" isParent":"")+'" id="item-'+t[i].item_id+'" data-id="'+t[i].item_id+'" data-cf="'+t[i].cf+'" data-lbs="'+t[i].lbs+'"><div class="img" style="background:url('+s+') no-repeat 50%;" id="'+t[i].item_name+'"><div class="number">'+(a!==-1?selected.categories[e].itemCount[a]:"")+'</div></div><div class="bottom"><h4 class="cancelSelect">'+(t[i].hasChildren.length>0?t[i].item_name:t[i].size+" "+t[i].item_name)+'</h4><div class="controls clearfix"><div class="minus">&ndash;</div><div class="plus">+</div></div></div></div>';$(document.getElementById("main-holder")).append(d)}}setTimeout(checkHeight,100,"#main-holder")},loadItems:function(e){currentCat=e;var t=selected.activeCats.indexOf(e);$("#items").find(".heading").find("span").html(selected.activeCats[t]),"undefined"!=typeof selected.activeCats[t+1]?($(".next").show(),$("#next-cat").html(selected.activeCats[t+1]+" >").attr("data-cat",selected.activeCats[t+1])):$(".next").hide(),$("#items-holder").html("");var i=[];$.each(items,function(t,s){s.category==e&&i.push(s)});if(selected.categories[e].sub_categories.length>0)for(var s=0;s<selected.categories[e].sub_categories.length;s++){var a=selected.categories[e].sub_categories[s];a=a.split(" ").join("_"),$("#items-holder").append('<div class="sub-cat" id="subcat-'+a+'"><div class="sub-heading">'+a.split("_").join(" ")+'</div><div class="items-container clearfix"></div>')}for(var n=0,s=0;s<i.length;s++){var d="img/items/"+i[s].item_name.split(" ").join("_").toLowerCase()+".png";if(i[s].isChild!==!0){var l=selected.categories[e].items.indexOf(i[s].item_id),o=selected.categories[e].items.indexOf(i[s].item_id)!==-1?" owned":"",m='<div class="item'+o+(i[s].hasChildren.length>0?" isParent":"")+'" id="item-'+i[s].item_id+'" data-id="'+i[s].item_id+'" data-cf="'+i[s].cf+'" data-lbs="'+i[s].lbs+'"><div class="img" style="background:url('+d+') no-repeat 50%;" id="'+i[s].item_name+'"><div class="number">'+(l!==-1?selected.categories[e].itemCount[l]:"")+'</div></div><div class="bottom"><h4 class="cancelSelect">'+(i[s].hasChildren.length>0?i[s].item_name:i[s].size+" "+i[s].item_name)+'</h4><div class="controls clearfix"><div class="minus">&ndash;</div><div class="plus">+</div></div></div>'+(i[s].hasChildren.length>0?"<div class='menu'><ul></ul></div>":"")+"</div>";if(selected.categories[e].sub_categories.length>0){var a=i[s].sub_category;a=a.split(" ").join("_"),""==a&&(a="Other"),$(document.getElementById("subcat-"+a)).find(".items-container").append(m)}else $(document.getElementById("items-holder")).append(m);if(i[s].hasChildren.length>0){$("#item-"+i[s].item_id).find(".menu ul").append('<li data-id="'+i[s].item_id+'" data-cf="'+i[s].cf+'" data-lbs="'+i[s].lbs+'" data-parentID="'+i[s].item_id+'" class="clearfix"><div class="item-name">Size: '+i[s].size+'</div><div class="multi-controls"><div class="multi-minus">&ndash;</div></div><div class="number"></div></li>');for(var c=0;c<i[s].hasChildren.length;c++){var r=items[i[s].hasChildren[c]];$("#item-"+i[s].item_id).find(".menu ul").append('<li id="item-'+r.item_id+'" data-id="'+r.item_id+'" data-cf="'+r.cf+'" data-lbs="'+r.lbs+'" data-parentID="'+i[s].item_id+'" class="clearfix"><div class="item-name">Size: '+r.size+'</div><div class="multi-controls"><div class="multi-minus">&ndash;</div></div><div class="number"></div></li>')}}n++}}checkHeight("#items-holder")},loadReview:function(){var e=$("#review-holder"),t=0;e.html(""),$.each(selected.categories,function(i,s){if(s.total>0)for(var a=0;a<s.items.length;a++)e.append('<div class="item clearfix '+(Math.floor(t/2)%2==0?"dark-grey":"")+'"><div class="item-name">'+items[s.items[a]].size+" "+items[s.items[a]].item_name+'</div><div class="item-count">'+s.itemCount[a]+"</div></div>"),t++})}},currentCat="";$(document).ready(function(){selected.loadCats(),$.getJSON("js/items.json").done(function(e){items=e}),$.get("response.php").done(function(e){var t=$.parseJSON(e);jQuery.extend(selected,t),console.log(selected)}),emailChecked=$("#user-email").val(),$("#user-email").trigger("keyup"),$("#save-button").on("click",function(){$(this).hasClass("to-items")?selected.activeCats.length>0&&($(this).removeClass("to-items").addClass("to-boxes"),$(".active").addClass("completed").removeClass("active").next().addClass("active"),$("#categories").css({position:"absolute"}).animate({left:"-100%",opacity:0},400,function(){$(this).hide()}),$("#sidebar").delay(100).animate({left:"-3.51063829787234%"},500).find(".status-bar").animate({bottom:0},500),$("#sidebar").find(".overflow").css({height:362}),checkHeight("#ul-holder"),$("#ul-holder").find("ul").addClass("selectable").find("li").eq(0).addClass("current"),$("#items").show().css({left:"28.096217493089833%",opacity:1}).addClass("animate-in2").find(".heading > span").html(selected.activeCats[0]),setTimeout(function(){$("#items").removeClass("animate-in2")},500),selected.loadItems(selected.activeCats[0]),currentStep++):$(this).hasClass("to-boxes")?selected.total>0&&($(this).removeClass("to-boxes").addClass("to-review"),$(".active").addClass("completed").removeClass("active").next().addClass("active"),selected.loadBoxes(),$("#sidebar").animate({left:"-103%",opacity:0},500,function(){$(this).hide()}),$("#items").css({position:"absolute"}).animate({left:"100%",opacity:0},500,function(){$(this).hide()}),$("#boxes-main").css({left:0,opacity:1,display:"block"}).addClass("animate-in2"),$("#boxes-sidebar").css({left:"71.789362%",display:"block"}).addClass("animate-in2"),setTimeout(function(){$(".animate-in2").removeClass("animate-in2")},500),currentStep++):$(this).hasClass("to-review")?(selected.loadReview(),$(this).removeClass("to-review").addClass("to-completed"),$(".active").addClass("completed").removeClass("active").next().addClass("active"),$(".email").hide(),$("#boxes-main").css({position:"absolute"}).animate({left:"-100%",opacity:0},400,function(){$(this).hide()}),$("#boxes-sidebar").animate({left:"+=100%"},500,function(){$(this).hide()}),$("#review-main").css({display:"block",left:0,opacity:1}).addClass("animate-in2"),$("#review-sidebar").css({display:"block",left:"75.389362%",opacity:1}).addClass("animate-in2"),setTimeout(function(){$(".animate-in2").removeClass("animate-in2")},500),currentStep++):$(this).hasClass("to-completed")&&(emailChecked?(sendEmail(emailChecked),$(".user-email").html(emailChecked)):$("#email-text").html("SEND<br/>EMAIL?"),$(".active").addClass("completed").removeClass("active").next().addClass("active"),$(this).hide(),$("#review-main").css({position:"absolute"}).animate({left:"-100%",opacity:0},500,function(){$(this).hide()}),$("#review-sidebar").animate({left:"+=100%",opacity:0},500,function(){$(this).hide()}),$(".done").show(),$("#completed-heading").animate({marginLeft:"0%"},500),$("#completed-subheading").animate({marginLeft:"0%"},500),$("#completed-box").find(".big").html(selected.total),currentStep++)}),$(".step").on("click",function(){var e=$(this).index();if(console.log(currentStep,e),$(this).hasClass("completed")){$(".active").removeClass("active");for(var t=e;t<4;t++)$(".step").eq(t).removeClass("completed");$(this).removeClass("completed").addClass("active"),1==currentStep?($("#items").css({position:"absolute"}).addClass("animate-out"),setTimeout(function(){$("#items").hide().removeClass("animate-out"),$("#items-holder").css({top:0})},500)):2==currentStep?($("#boxes-main").addClass("animate-out"),$("#boxes-sidebar").addClass("animate-out"),setTimeout(function(){$(".animate-out").hide().removeClass("animate-out")},700)):3==currentStep?($("#review-main").addClass("animate-out"),$("#review-sidebar").addClass("animate-out"),setTimeout(function(){$(".animate-out").hide().removeClass("animate-out")},700)):4==currentStep&&($("#completed-heading").animate({marginLeft:"-100%"},500),$("#completed-subheading").animate({marginLeft:"100%"},500,function(){$(".done").hide(),$("#save-button").show()})),0==e?($("#categories").delay(400).show().animate({left:"0%",opacity:1},400,function(){$(this).removeAttr("style")}),$("#sidebar").delay(200).show().animate({left:"71.789362%",opacity:1}),$("#ul-holder").find("ul").removeClass("selectable").find("li").removeClass("current"),$("#save-button").removeClass("to-boxes").addClass("to-items")):1==e?($("#save-button").removeClass("to-review").addClass("to-boxes"),$("#items").show().delay(200).animate({left:"28.096217493089833%",opacity:1},500,function(){$(this).css({position:"relative"})}),$("#sidebar").show().delay(200).animate({left:"-3.51064%",opacity:1},500)):2==e?($("#save-button").removeClass("to-completed").addClass("to-review"),$("#boxes-main").show().delay(200).animate({left:"0",opacity:1},500,function(){$(this).css({position:"relative"})}),$("#boxes-sidebar").show().delay(200).animate({left:"71.789362%",opacity:1},500)):3==e&&($("#review-main").show().animate({left:"0%",opacity:1},500),$("#review-sidebar").show().animate({left:"-=100%",opacity:1},500)),currentStep=e}}),$("#user-email").on("keyup",function(){$("#email-counter").html($(this).val());var e=$("#email-counter").outerWidth();$(this).css({width:e})}),$("#categories").on("click",".item",function(){if(!animating){animating=!0;var e=$(this).find(".img").attr("id").split("_").join(" ");selected.addCat(e),$(this).addClass("animate-out").delay(450).fadeOut(0,function(){$(this).removeClass("animate-out")})}}),$("#ul-holder").on("click",".close-btn",function(){$(this).parent().addClass("animate-out");var e=$(this).prev().html();selected.activeCats.splice(selected.activeCats.indexOf(e),1),$("#"+e).parent().fadeIn(0,function(){$(this).addClass("animate-in")}),checkHeight("#cat-holder");var t=this;setTimeout(function(){$(t).parent().remove(),$("#"+e).parent().removeClass("animate-in"),checkHeight("#ul-holder")},500)}),$("#terms").on("change",function(e){emailChecked=!!$(this).is(":checked")&&$("#user-email").val()}),$("#sidebar").on("click",".selectable li",function(){$(".current").removeClass("current"),$(this).addClass("current");var e=$(this).find(".cat").attr("id").split("_").join(" ").split("added-")[1];selected.loadItems(e),$("#items-holder").css({top:0})}),$("#items-holder").on("click",".item",function(){var e=parseInt($(this).attr("data-id"));$(this).hasClass("isParent")!==!0&&($(this).addClass("owned"),selected.addItem(e,currentCat,parseInt($(this).attr("data-lbs")),parseInt($(this).attr("data-cf"))),$(this).find(".controls").stop(!0).animate({top:"0%"},200))}),$("#items-holder").on("click","li",function(e){e.stopPropagation();var t=parseInt($(this).attr("data-id")),i=parseInt($(this).attr("data-parentID"));$(this).parents(".item").addClass("owned"),selected.addItem(t,currentCat,parseInt($(this).attr("data-lbs")),parseInt($(this).attr("data-cf")),i)}),$("#items-holder").on("click",".minus",function(e){e.stopPropagation();var t=parseInt($(this).parents(".item").attr("data-id"));selected.removeItem(t,currentCat,parseInt($(this).parents(".item").attr("data-lbs")),parseInt($(this).parents(".item").attr("data-cf")))}),$("#items-holder").on("click",".multi-minus",function(e){e.stopPropagation();var t=parseInt($(this).parents("li").attr("data-id")),i=parseInt($(this).parents("li").attr("data-parentID"));selected.removeItem(t,currentCat,parseInt($(this).parents(".item").attr("data-lbs")),parseInt($(this).parents(".item").attr("data-cf")),i)}),$("#items-holder").on("mouseenter",".owned",function(){$(this).hasClass("isParent")!==!0&&$(this).find(".controls").stop(!0).animate({top:"0%"},200)}).on("mouseleave",".owned",function(){$(this).hasClass("isParent")!==!0&&$(this).find(".controls").stop(!0).animate({top:"100%"},200)}),$("#items-holder").on("click",".plus, .minus",function(){$(this).addClass("pressed"),setTimeout(function(){$(".pressed").removeClass("pressed")},200)}),$("#next-cat").on("click",function(){var e=$(this).attr("data-cat");$("#added-"+e.split(" ").join("_")).trigger("click")}),$("#search").on("keyup",function(e){var t=$(this).val().toLowerCase();if(t.length>=2){var i=new RegExp(t,"g"),s=[];if($.each(items,function(e,t){i.test(t.item_name.toLowerCase())&&s.push(t)}),s.length>0){$("#search-results").find("ul").html(""),$("#search-image").removeAttr("style");for(var a=0;a<s.length;a++)$(".search").show().find("ul").append('<li data-id="'+s[a].item_id+'" data-cat="'+s[a].category+'" data-cf="'+s[a].cf+'" data-lbs="'+s[a].lbs+'">'+(""!==s[a].sub_category?s[a].sub_category+", ":"")+s[a].item_name+(""!==s[a].size?" - "+s[a].size:"")+"</li>")}else $(".search").hide()}else $(".search").hide().find("ul").html("")}),$("#search-results").on("mousewheel",function(e){e.stopPropagation()}),$("#search-results").on("click","li",function(){var e=$(this).attr("data-cat"),t=$("#search-image").offset();selected.activeCats.indexOf(e)===-1&&selected.addCat(e);var i=$("#added-"+e).siblings(".number").offset();selected.addItem($(this).attr("data-id"),e,parseInt($(this).attr("data-lbs")),parseInt($(this).attr("data-cf"))),$("#search-image").addClass("scaleDown").animate({right:"+="+(t.left-i.left),top:"+="+(i.top-t.top)},500,function(){$(this).removeAttr("style").hide().removeClass("scaleDown")}),$("#search").val(""),$("#search-results").hide().find("ul").html("")}),$("#main-holder").on("click",".item",function(){var e=parseInt($(this).attr("data-id"));$(this).addClass("owned"),selected.addItem(e,"Boxes",parseInt($(this).attr("data-lbs")),parseInt($(this).attr("data-cf"))),$(this).find(".controls").stop(!0).animate({top:"0%"},200)}),$("#main-holder").on("click",".minus",function(e){e.stopPropagation();var t=parseInt($(this).parents(".item").attr("data-id"));selected.removeItem(t,"Boxes",parseInt($(this).parents(".item").attr("data-lbs")),parseInt($(this).parents(".item").attr("data-cf")))}),$("#main-holder").on("mouseenter",".owned",function(){$(this).find(".controls").stop(!0).animate({top:"0%"},200)}).on("mouseleave",".owned",function(){$(this).find(".controls").stop(!0).animate({top:"100%"},200)}),$("#main-holder").on("click",".plus, .minus",function(){$(this).addClass("pressed"),setTimeout(function(){$(".pressed").removeClass("pressed")},200)}),$("#email-btn").on("click",function(){})});